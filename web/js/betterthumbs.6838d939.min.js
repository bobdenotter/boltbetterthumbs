$(document).ready(function(){$(".image-container").on("click",".deletebutton",function(e){var n=this.id,t=e.target,i=$('<div class="cp-spinner cp-skeleton"></div><p>Removing Image</p>');$.ajax({type:"POST",url:"/bolt/extend/betterthumbs/files/delete",data:{img:n},beforeSend:function(){$(t).parentsUntil(".image-container").children(".img-container").hide(),$(t).hide(),$(t).parent().append(i)},success:function(){$(t).hide(),$(t).siblings(i).hide(),$(t).before('<p class="removed-success">'+n+" Has been removed from the cache</p>")},error:function(e,n,t){console.log(e),console.log("Details: "+n+"\nError:"+t)}})}),$(".delete-all").on("click",function(e){var n=$(".delete-all").data("all"),t=$('<div class="cp-spinner cp-skeleton"></div><p>Removing All Images</p>'),i=e.target,a=$("#image-grid");$.ajax({type:"POST",url:"/bolt/extend/betterthumbs/files/delete/all",data:{all:n},beforeSend:function(){$(i).parent().append(t),$(i).hide()},success:function(){$(i).hide(),$(i).siblings(t).hide(),$(i).before('<p class="removed-success">All Images Have Been Removed From The Cache</p>'),a.empty(),a.append('<div class="column"><p>No Images In Cache</p></div>')},error:function(e,n,t){console.log(e),console.log("Details: "+n+"\nError:"+t),$(i).parent().append(e.responseText)}})}),$(".image-popup-fit-width").magnificPopup({type:"image",closeOnContentClick:!0,image:{verticalFit:!1}})}),$(document).ready(function(){function e(e){$(e).hide(),$(e).before(a)}function n(e){$(e).show(),$(e).siblings(a).detach()}function t(){for(var e=document.querySelectorAll(".button"),n=0;n<e.length;++n)e[n].setAttribute("disabled","disabled")}function i(){for(var e=document.querySelectorAll(".button"),n=0;n<e.length;++n)e[n].removeAttribute("disabled")}var a=$('<span class="cp-spinner cp-skeleton"></span><p>Creating Images</p>'),s=$(".fieldset");s.on({click:function(e){var n=e.target,t=n.getAttribute("data-bthumb-name"),i=$(n).parent().prev().find(".prime-cache-dropdown").val(),a=$(n).parent().prev().find(".prime-cache-single-input").val(),s=n.getAttribute("data-presets");n.classList.contains("prime-config")&&o(n,t,i,"config"),n.classList.contains("prime-presets")&&o(n,t,s,"presets"),n.classList.contains("prime-single")&&o(n,t,a,"single")},keypress:function(e){var n=e.target,t=e.keyCode||e.which,i=$(n).parent().parent().next().find("BUTTON"),a=$(n).parent().parent().next().find("BUTTON").data("bthumb-name"),s=$(n).val(),r=$(n).data("presets");13===t&&(e.preventDefault(),i.hasClass("prime-config")&&$(n).on("click",o(i,a,s,"config")),$(n).hasClass("prime-presets")&&$(n).on("click",o(".prime-presets",a,r,"presets")),i.hasClass("prime-single")&&$(n).on("click",o(i,a,s,"single")))}});var o=function(a,s,o,r){$.ajax({type:"POST",url:"/bolt/extend/betterthumbs/files/prime/do",data:{modType:r,configName:o,image:s},beforeSend:function(){e(a),t()},success:function(){i(),n(a)},error:function(e,n,t){console.log(e),console.log("Details: "+n+"\nError:"+t)}})}});