$(document).ready(function(){var e=$("#boltPath").data("bolt-path");$(".image-container").on("click",".deletebutton",function(t){var i=this.id,n=t.target,s=$('<div class="cp-spinner cp-skeleton"></div><p>Removing Image</p>');$.ajax({type:"POST",url:e+"/betterthumbs/files/delete",data:{img:i},beforeSend:function(){$(n).parentsUntil(".image-container").children(".img-container").hide(),$(n).hide(),$(n).parent().append(s)},success:function(){$(n).hide(),$(n).siblings(s).hide(),$(n).before('<p class="removed-success">'+i+" Has been removed from the cache</p>")},error:function(e,t,i){console.log(e),console.log("Details: "+t+"\nError:"+i)}})}),$(".delete-all").on("click",function(t){var i=$(".delete-all").data("all"),n=$('<div class="cp-spinner cp-skeleton"></div><p>Removing All Images</p>'),s=t.target,r=$("#image-grid");$.ajax({type:"POST",url:e+"/betterthumbs/files/delete/all",data:{all:i},beforeSend:function(){$(s).parent().append(n),$(s).hide()},success:function(){$(s).hide(),$(s).siblings(n).hide(),$(s).before('<p class="removed-success">All Images Have Been Removed From The Cache</p>'),r.empty(),r.append('<div class="column"><p>No Images In Cache</p></div>')},error:function(e,t,i){console.log(e),console.log("Details: "+t+"\nError:"+i),$(s).parent().append(e.responseText)}})})}),$(document).ready(function(){function e(e){$(e).hide(),$(e).before(s)}function t(e){$(e).show(),$(e).siblings(s).detach()}function i(){for(var e=document.querySelectorAll(".button"),t=0;t<e.length;++t)e[t].setAttribute("disabled","disabled")}function n(){for(var e=document.querySelectorAll(".button"),t=0;t<e.length;++t)e[t].removeAttribute("disabled")}var s=$('<span class="cp-spinner cp-skeleton"></span><p>Creating Images</p>');$(".fieldset").on({click:function(e){var t=e.target,i=t.getAttribute("data-bthumb-name"),n=$(t).parent().prev().find(".prime-cache-dropdown").val(),s=$(t).parent().prev().find(".prime-cache-single-input").val(),o=t.getAttribute("data-presets");if(t.classList.contains("prime-config")&&r(t,i,n,"config"),t.classList.contains("prime-presets")&&r(t,i,o,"presets"),t.classList.contains("prime-single")){if(""===s)return $(t).parent().prev().find(".prime-single-error").removeAttr("hidden"),!1;console.log(s),r(t,i,s,"single")}},change:function(e){var t=e.target;e.keyCode||e.which,$(t).hasClass("prime-cache-single-input")&&$(".prime-cache-single-input").length>0&&$(t).parent().next().attr("hidden","hidden")},keypress:function(e){var t=e.target,i=e.keyCode||e.which,n=$(t).parent().parent().next().find("BUTTON"),s=$(t).parent().parent().next().find("BUTTON").data("bthumb-name"),o=$(t).val(),a=$(t).data("presets");if(13===i&&(e.preventDefault(),n.hasClass("prime-config")&&$(t).on("click",r(n,s,o,"config")),$(t).hasClass("prime-presets")&&$(t).on("click",r(".prime-presets",s,a,"presets")),n.hasClass("prime-single"))){if(""===$(t).val())return $(t).parent().next().removeAttr("hidden"),!1;$(t).on("click",r(n,s,o,"single"))}}});var r=function(s,r,o,a){$.ajax({type:"POST",url:$("#boltPath").data("bolt-path")+"/betterthumbs/files/prime/do",data:{modType:a,configName:o,image:r},beforeSend:function(){e(s),i()},success:function(){n(),t(s)},error:function(e,t,i){console.log(e),console.log("Details: "+t+"\nError:"+i)}})}}),function(){function e(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}function t(e,t,i){for(var n in t){var s=t[n],r=e.input.getAttribute("data-"+n.toLowerCase());"number"==typeof s?e[n]=parseInt(r):!1===s?e[n]=null!==r:s instanceof Function?e[n]=null:e[n]=r,e[n]||0===e[n]||(e[n]=n in i?i[n]:s)}}function i(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function n(e,t){return o.call((t||document).querySelectorAll(e))}function s(){n("input.awesomplete").forEach(function(e){new r(e)})}var r=function(e,n){var s=this;Awesomplete.count=(Awesomplete.count||0)+1,this.count=Awesomplete.count,this.isOpened=!1,this.input=i(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),n=n||{},t(this,{minChars:2,maxItems:10,autoFirst:!1,data:r.DATA,filter:r.FILTER_CONTAINS,sort:!1!==n.sort&&r.SORT_BYLENGTH,item:r.ITEM,replace:r.REPLACE},n),this.index=-1,this.container=i.create("div",{className:"awesomplete",around:e}),this.ul=i.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=i.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;s.opened&&(13===t&&s.selected?(e.preventDefault(),s.select()):27===t?s.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),s[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),s.select(t,e.target))}}}},i.bind(this.input,this._events.input),i.bind(this.input.form,this._events.form),i.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],r.all.push(this)};r.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&e.indexOf(",")>-1)this._list=e.split(/\s*,\s*/);else if((e=i(e))&&e.children){var t=[];o.apply(e.children).forEach(function(e){if(!e.disabled){var i=e.textContent.trim(),n=e.value||i,s=e.label||i;""!==n&&t.push({label:s,value:n})}}),this._list=t}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,i.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.autoFirst&&-1===this.index&&this.goto(0),i.fire(this.input,"awesomplete-open")},destroy:function(){i.unbind(this.input,this._events.input),i.unbind(this.input.form,this._events.form);var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container),this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=r.all.indexOf(this);-1!==t&&r.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&t.length>0&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,i.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){if(e?this.index=i.siblingIndex(e):e=this.ul.children[this.index],e){var n=this.suggestions[this.index];i.fire(this.input,"awesomplete-select",{text:n,origin:t||e})&&(this.replace(n),this.close({reason:"select"}),i.fire(this.input,"awesomplete-selectcomplete",{text:n}))}},evaluate:function(){var t=this,i=this.input.value;i.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(n){return new e(t.data(n,i))}).filter(function(e){return t.filter(e,i)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(e,n){t.ul.appendChild(t.item(e,i,n))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},r.all=[],r.FILTER_CONTAINS=function(e,t){return RegExp(i.regExpEscape(t.trim()),"i").test(e)},r.FILTER_STARTSWITH=function(e,t){return RegExp("^"+i.regExpEscape(t.trim()),"i").test(e)},r.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},r.ITEM=function(e,t,n){return i.create("li",{innerHTML:""===t.trim()?e:e.replace(RegExp(i.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},r.REPLACE=function(e){this.input.value=e.value},r.DATA=function(e){return e},Object.defineProperty(e.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),e.prototype.toString=e.prototype.valueOf=function(){return""+this.label};var o=Array.prototype.slice;i.create=function(e,t){var n=document.createElement(e);for(var s in t){var r=t[s];if("inside"===s)i(r).appendChild(n);else if("around"===s){var o=i(r);o.parentNode.insertBefore(n,o),n.appendChild(o)}else s in n?n[s]=r:n.setAttribute(s,r)}return n},i.bind=function(e,t){if(e)for(var i in t){var n=t[i];i.split(/\s+/).forEach(function(t){e.addEventListener(t,n)})}},i.unbind=function(e,t){if(e)for(var i in t){var n=t[i];i.split(/\s+/).forEach(function(t){e.removeEventListener(t,n)})}},i.fire=function(e,t,i){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0);for(var s in i)n[s]=i[s];return e.dispatchEvent(n)},i.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},i.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof Document&&("loading"!==document.readyState?s():document.addEventListener("DOMContentLoaded",s)),r.$=i,r.$$=n,"undefined"!=typeof self&&(self.Awesomplete=r),"object"==typeof module&&module.exports&&(module.exports=r)}();